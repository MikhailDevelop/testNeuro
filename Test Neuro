<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Слайдер пользователей</title>
    
</head>
<body>
    <h2>Слайдер пользователей</h2>
    <label for="card-count">Количество карточек: </label>
    <select id="card-count">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3" selected>3</option>
        <option value="4">4</option>
    </select>
    <div class="slider-container">
        <div class="slider-wrapper"></div>
    </div>
    <div class="controls">
        <button class="prev">Назад</button>
        <button class="next">Вперед</button>
        <button class="add">Добавить слайд</button>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const sliderContainer = document.querySelector(".slider-container");
            const sliderWrapper = document.querySelector(".slider-wrapper");
            const prevBtn = document.querySelector(".prev");
            const nextBtn = document.querySelector(".next");
            const addBtn = document.querySelector(".add");
            const cardCountSelect = document.querySelector("#card-count");
            let users = [];
            let visibleCards = 3;
            let currentIndex = 0;

            async function fetchUsers() {
                try {
                    const response = await fetch("https://reqres.in/api/users");
                    const data = await response.json();
                    users = data.data;
                    renderSlider();
                } catch (error) {
                    console.error("Ошибка загрузки данных", error);
                }
            }

            function renderSlider() {
                sliderWrapper.innerHTML = "";
                users.forEach(user => addCard(user));
                updateSlider();
            }

            function addCard(user) {
                const card = document.createElement("div");
                card.classList.add("card");
                card.innerHTML = `
                    <img src="${user.avatar}" alt="${user.first_name}">
                    <h3>${user.first_name} ${user.last_name}</h3>
                    <p>${user.email}</p>
                    <button class="remove">Удалить</button>
                `;
                card.querySelector(".remove").addEventListener("click", () => removeCard(user.id));
                sliderWrapper.appendChild(card);
            }

            function updateSlider() {
                const cardWidth = sliderContainer.clientWidth / visibleCards;
                document.querySelectorAll(".card").forEach(card => {
                    card.style.width = `${cardWidth}px`;
                });
                sliderWrapper.style.transform = `translateX(-${currentIndex * cardWidth}px)`;
            }

            function removeCard(id) {
                users = users.filter(user => user.id !== id);
                renderSlider();
            }

            prevBtn.addEventListener("click", () => {
                if (currentIndex > 0) {
                    currentIndex--;
                    updateSlider();
                }
            });

            nextBtn.addEventListener("click", () => {
                if (currentIndex < users.length - visibleCards) {
                    currentIndex++;
                    updateSlider();
                }
            });

            addBtn.addEventListener("click", () => {
                const newUser = {
                    id: Date.now(),
                    first_name: "Новый",
                    last_name: "Пользователь",
                    email: "new.user@example.com",
                    avatar: "https://via.placeholder.com/150"
                };
                users.push(newUser);
                addCard(newUser);
                updateSlider();
            });

            cardCountSelect.addEventListener("change", (e) => {
                visibleCards = parseInt(e.target.value, 10);
                updateSlider();
            });

            fetchUsers();
        });
    </script>
</body>
</html>

<style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        .slider-container {
            width: 80%;
            overflow: hidden;
            margin: auto;
            border: 1px solid #ddd;
            position: relative;
        }
        .slider-wrapper {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .card {
            flex: 0 0 auto;
            background: #f9f9f9;
            padding: 10px;
            border-radius: 5px;
            margin: 5px;
            text-align: center;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }
        .card img {
            max-width: 100%;
            border-radius: 50%;
        }
        .controls {
            margin-top: 10px;
        }
        button {
            padding: 8px 12px;
            margin: 5px;
            border: none;
            background: #007BFF;
            color: white;
            cursor: pointer;
            border-radius: 3px;
        }
        button:hover {
            background: #0056b3;
        }
    
</style>
